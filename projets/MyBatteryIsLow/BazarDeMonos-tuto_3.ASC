Rem ************************************
Rem *** Rover mobile AMOS Pro 2.0 ***
Rem ************************************

Global RoverX,RoverY,ImageID

Rem --- Initialisation ---
RoverX = 100
Rem Position initiale X
RoverY = 100
Rem Position initiale Y
ImageID = 1
Rem ID de l’image à afficher

Screen Open 0,320,200,16,Lowres
Rem Écran 320×200 16 couleurs
Curs Off
Rem Curseur désactivé
Flash Off
Rem Flash désactivé
Cls 2
Rem Fond orange
Hide On
Rem Cache pointeur souris

Set Sprite Buffer 256
Rem Alloue 256 Ko au système de sprites

Load Iff "img/rover_pixelart_black-bkg.iff"
Rem Charge l’IFF contenant notre sprite

Get Sprite 1,0,0 To 216,116
Rem Extrait le sprite du fichier IFF
Get Sprite Palette
Rem Charge la palette de couleurs des sprites

Colour 0,$FAA
Rem Couleur 0 = orange (transparence)

Rem --- Affiche le sprite une première fois ---
Sprite 8,RoverX,RoverY,ImageID
Rem Le sprite hardware numéro 8 (doit être un nombre fixe)

Rem --- Boucle principale ---
While 1
    Wait Vbl

    Rem --- Détection touches fléchées ---
    If Key State(79) : RoverX = RoverX - 2
    Else If Key State(78) : RoverX = RoverX + 2
    Else If Key State(77) : RoverY = RoverY - 2
    Else If Key State(76) : RoverY = RoverY + 2
    End If

    Rem --- Repositionne le sprite à ses nouvelles coordonnées ---
    Sprite 8,RoverX,RoverY,ImageID

    Rem --- Quitter si bouton fire pressé ---
    If Key State(69) : End
    End If
Wend

End
